(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{262:function(t,e,s){"use strict";s.r(e);var r=s(28),a=Object(r.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"从-docker-工作流来了解学习-docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从-docker-工作流来了解学习-docker"}},[t._v("#")]),t._v(" 从 docker 工作流来了解学习 docker")]),t._v(" "),s("h2",{attrs:{id:"捋一下流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#捋一下流程"}},[t._v("#")]),t._v(" 捋一下流程")]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/img/docker1.png",alt:"/assets/img/docker1"}})]),t._v(" "),s("p",[t._v("流程描述：")]),t._v(" "),s("p",[t._v("首先 "),s("code",[t._v("dockerfile")]),t._v(" 是用来干嘛的呢，他是用来定制镜像的一个东西（文件），可以把它想象做源码，通过"),s("strong",[t._v("命令")]),t._v(" "),s("code",[t._v("docker build")]),t._v(" 之后会生成 "),s("code",[t._v("docker image")]),t._v("（镜像），其实就是可以理解成一个前端项目的打包，而 "),s("code",[t._v("docker image")]),t._v(" 通过"),s("strong",[t._v("命令")]),t._v(" "),s("code",[t._v("docker run")]),t._v(" 基于一个镜像 "),s("code",[t._v("docker image")]),t._v(" 启动一个容器 "),s("code",[t._v("docker container")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("与前端项目做对比")]),t._v(" "),s("p",[t._v("前端项目: 源码打包 --\x3e 打包后文件 --\x3e 用打包后的文件在 xx 端口运行文件\ndocker: dockerfile打包 --\x3e 镜像 --\x3e 用打包后的镜像在 xx 端口运行容器")]),t._v(" "),s("p",[t._v("docker流程简化: dockerfile --\x3e docker image --\x3e docker container")])]),t._v(" "),s("p",[t._v("下面来分别细品一下这三个东西")]),t._v(" "),s("h2",{attrs:{id:"_1-dockerfile"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-dockerfile"}},[t._v("#")]),t._v(" 1. dockerfile")]),t._v(" "),s("p",[t._v("这个东西就是一个文件，文件里面写一条又一条的 指令 ，每一条指令构建一层，因此每一条指令的内容，就是描述该层应当如何构建。")]),t._v(" "),s("p",[t._v("举个例子")]),t._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# dockerifle")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" nginx\nRUN "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<h1>Hello, Docker!</h1>'")]),t._v(" > "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("share"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html\n")])])]),s("p",[t._v("上面这个 dockerifle 这个文件写了两行指令，也就是两层，可以想象成是楼层")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("一层")]),t._v(" "),s("th",[s("code",[t._v("FROM nginx")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("二层")]),t._v(" "),s("td",[s("code",[t._v("RUN echo '<h1>Hello, Docker!</h1>' > /usr/share/nginx/html/index.html")])])])])]),t._v(" "),s("p",[t._v("这个层的概念挺重要的，docker 如今这么🔥，这种机制就是原因之一")]),t._v(" "),s("h2",{attrs:{id:"_2-docker-image-镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-docker-image-镜像"}},[t._v("#")]),t._v(" 2. docker image 镜像")]),t._v(" "),s("p",[t._v("什么是镜像呢")]),t._v(" "),s("p",[t._v("指定 dockerfile 通过 "),s("strong",[t._v("命令")]),t._v(" "),s("code",[t._v("docker build")]),t._v(" 后生成的文件系统")]),t._v(" "),s("p",[t._v("这个文件系统，他也是分层的哈，采用的是分级存储机制，")]),t._v(" "),s("p",[t._v("这种分层存储机制有些特别之处，举两个例子：")]),t._v(" "),s("ol",[s("li",[t._v("两个层次和顺序上有所相同docker文件")])]),t._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Dcokerfile")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" nginx\nRUN "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<h1>Hello, Docker!</h1>'")]),t._v(" > "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("share"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html\nRUN "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<h1>Hello, Docker2!</h1>'")]),t._v(" > "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("share"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html\n")])])]),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Dcokerfile.2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" nginx\nRUN "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<h1>Hello, Docker!</h1>'")]),t._v(" > "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("share"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html\nRUN "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<h1>Hello, Docker3!</h1>'")]),t._v(" > "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("share"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html\n")])])]),s("p",[t._v("分别打包两个 dockerfile 来研究下")]),t._v(" "),s("blockquote",[s("p",[t._v("我这里是在桌面目录下的 dockerfile 文件夹下建了两个文件，分别是 "),s("code",[t._v("Dockerfile.2")]),t._v(" 和 "),s("code",[t._v("Dockerfile")]),t._v("，并且在桌面目录下执行了 "),s("code",[t._v("docker build")])])]),t._v(" "),s("p",[s("strong",[t._v("预设：本地已有 "),s("code",[t._v("nginx")]),t._v(" 镜像， ID:ed21b7a8aee9")])]),t._v(" "),s("p",[s("code",[t._v("docker build -t nginx:ccc1 -f dockerfile/Dockerfile dockerfile")])]),t._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Dcokerfile")]),t._v("\nccc@cccde"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("MBP  ~"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Desktop  docker build "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("t nginx:ccc1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("f dockerfile"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Dockerfile dockerfile\nSending build context to Docker daemon  3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("072kB\nStep 1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("3 : "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" nginx\n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("> ed21b7a8aee9 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这里是直接拿的我本地的nginx镜像来作为这一层的镜像 -- 后面解释")]),t._v("\nStep 2"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("3 : RUN "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<h1>Hello, Docker!</h1>'")]),t._v(" > "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("share"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html\n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("> Running in 807fc992f1a2\nRemoving intermediate container 807fc992f1a2\n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("> 3e29b42cb5c0 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这里是生成新一层镜像")]),t._v("\nStep 3"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("3 : RUN "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<h1>Hello, Docker2!</h1>'")]),t._v(" > "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("share"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html\n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("> Running in 20cdcb26f67a\nRemoving intermediate container 20cdcb26f67a\n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("> 4e070946a40c "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这里是生成新一层镜像")]),t._v("\nSuccessfully built 4e070946a40c\nSuccessfully tagged nginx:ccc1\n")])])]),s("p",[s("code",[t._v("docker build -t nginx:ccc2 -f dockerfile/Dockerfile.2 dockerfile")])]),t._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Dcokerfile.2")]),t._v("\n ccc@cccde"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("MBP  ~"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Desktop  docker build "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("t nginx:ccc2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("f dockerfile"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Dockerfile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("2 dockerfile\nSending build context to Docker daemon  3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("072kB\nStep 1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("3 : "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" nginx\n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("> ed21b7a8aee "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这里是直接拿的我本地的nginx镜像来作为这一层的镜像 -- 后面解释")]),t._v("\nStep 2"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("3 : RUN "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<h1>Hello, Docker!</h1>'")]),t._v(" > "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("share"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html\n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("> "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Using")]),t._v(" cache\n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("> 3e29b42cb5c0  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这里是用上一个镜像同一层的镜像")]),t._v("\nStep 3"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("3 : RUN "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<h1>Hello, Docker3!</h1>'")]),t._v(" > "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("share"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html\n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("> Running in 653187eeac8b\nRemoving intermediate container 653187eeac8b\n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("> 03d5affd23d7 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这里是生成新一层镜像")]),t._v("\nSuccessfully built 03d5affd23d7\nSuccessfully tagged nginx:ccc2\n")])])]),s("p",[t._v("解释：")]),t._v(" "),s("p",[t._v("首先本地已有 "),s("code",[t._v("nginx")]),t._v(" 镜像，ID: ed21b7a8aee")]),t._v(" "),s("p",[t._v("假设这个 nginx 是两层哈，看下第一张图")]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/img/docker2.png",alt:"docker2"}})]),t._v(" "),s("p",[t._v("看下第二张图：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/img/docker3.png",alt:"docker2"}})]),t._v(" "),s("p",[t._v("第二张图，由于 nginx:ccc 镜像的第一层，引入的就是 nginx 镜像，所以直接引用了 nginx 镜像来作为 nginx:ccc 镜像的第一层镜像，那么 nginx:ccc 镜像的第一层与 nginx 镜像开始平行，而第二层以下，都是新生成一层镜像")]),t._v(" "),s("p",[t._v("看下第三张图：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/img/docker4.png",alt:"docker2"}})]),t._v(" "),s("p",[t._v("第三张图，由于 nginx:ccc2 镜像的第一层，引入的就是 nginx 镜像，所以直接引用了 nginx 镜像来作为 nginx:ccc2 镜像的第一层镜像，那么 nginx:ccc2 镜像的第一层与 nginx 镜像和 nginx:ccc 镜像的第一层开始平行，那么 nginx:ccc2 镜像的第二层也与 nginx:ccc 镜像的第二层平行，而又因为 nginx:ccc2 镜像的第二层与 nginx:ccc 镜像的第二层平行且相等，所以 nginx:ccc2 在 docker build 的时候，第二层直接引用了 nginx:ccc 镜像的第二层")]),t._v(" "),s("p",[t._v("用表格来看的话是这样子")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th",[t._v("nginx:ccc")]),t._v(" "),s("th",[t._v("nginx:ccc2")]),t._v(" "),s("th",[t._v("特点")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("第一层")]),t._v(" "),s("td",[t._v("nginx")]),t._v(" "),s("td",[t._v("nginx")]),t._v(" "),s("td",[t._v("同层且相同")])]),t._v(" "),s("tr",[s("td",[t._v("第二层")]),t._v(" "),s("td",[s("code",[t._v("RUN echo '<h1>Hello, Docker!</h1>' > /usr/share/nginx/html/index.html")])]),t._v(" "),s("td",[s("code",[t._v("RUN echo '<h1>Hello, Docker!</h1>' > /usr/share/nginx/html/index.html")])]),t._v(" "),s("td",[t._v("同层且相同")])]),t._v(" "),s("tr",[s("td",[t._v("第三层")]),t._v(" "),s("td",[s("code",[t._v("RUN echo '<h1>Hello, Docker2!</h1>' > /usr/share/nginx/html/index.html")])]),t._v(" "),s("td",[s("code",[t._v("RUN echo '<h1>Hello, Docker3!</h1>' > /usr/share/nginx/html/index.html")])]),t._v(" "),s("td",[t._v("同层且不相同")])])])]),t._v(" "),s("h2",{attrs:{id:"_3-docker-container-容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-docker-container-容器"}},[t._v("#")]),t._v(" 3. docker container 容器")]),t._v(" "),s("p",[t._v("一句话，容器也是分层，区别在于，容器是运行时的，实实在在的在跑相应的镜像")]),t._v(" "),s("p",[t._v("区别在于什么呢，来理解一下哈")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("重点理解 不懂找我")]),t._v(" "),s("p",[t._v("镜像所谓的的分层是对所有镜像中每一层整合后进行排版，存的只是尚未执行的执行过程的树状流程图，而容器是自己镜像所有层执行后的文件系统，也就是对于镜像而已，镜像与镜像之间可能共享某几层，而对于容器而言，容器和容器之间都是一份自己所属镜像运行的结果（这个结果其实就是所有层执行后，对文件系统的所有更改后的文件系统而已也就是文件而已）")])]),t._v(" "),s("h2",{attrs:{id:"_4-常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-常用命令"}},[t._v("#")]),t._v(" 4. 常用命令")]),t._v(" "),s("ol",[s("li",[t._v("docker build")])]),t._v(" "),s("p",[s("code",[t._v("docker build -t nginx:ccc2 -f dockerfile/Dockerfile.2 dockerfile")])]),t._v(" "),s("p",[t._v("指定 Dockerfile 目录 dockerfile/Dockerfile ，指定上下文为路径 dockerfile ，")]),t._v(" "),s("p",[t._v("--tag/-t 是tag，通常是 tag:name 格式或者 name 格式")]),t._v(" "),s("p",[t._v("-f 指定要使用的 Dockerfile 的路径")]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("docker pull")])]),t._v(" "),s("p",[s("code",[t._v("docker pull nginx")])]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("docker image")])]),t._v(" "),s("p",[s("code",[t._v("docker images -a")])]),t._v(" "),s("p",[t._v("列出所有镜像")]),t._v(" "),s("p",[t._v("-a 所有")]),t._v(" "),s("p",[s("code",[t._v("docker images nginx")])]),t._v(" "),s("p",[t._v("列出所有 REPOSITORY 为 nginx 的镜像")]),t._v(" "),s("p",[s("code",[t._v("docker image prune")])]),t._v(" "),s("p",[t._v("删除虚悬镜像")]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("docker run")])]),t._v(" "),s("p",[s("code",[t._v("docker run -d --name myNginx -p 8080:80 nginx:ccc")])]),t._v(" "),s("p",[t._v("-d 后台运行")]),t._v(" "),s("p",[t._v("--name 给容器命名")]),t._v(" "),s("p",[t._v("-p 指定宿主端口:容器端口 映射")]),t._v(" "),s("p",[t._v("nginx:ccc 指定基础镜像")]),t._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[t._v("docker stop/start/restart")])]),t._v(" "),s("p",[s("code",[t._v("docker stop/start/restart nginx")])]),t._v(" "),s("p",[t._v("停止，启动，重启 nginx 容器")]),t._v(" "),s("ol",{attrs:{start:"6"}},[s("li",[t._v("docker rm")])]),t._v(" "),s("p",[s("code",[t._v("docker rm nginx")])]),t._v(" "),s("p",[t._v("删除 nginx 容器")]),t._v(" "),s("p",[s("code",[t._v("docker rmi nginx")])]),t._v(" "),s("ol",{attrs:{start:"7"}},[s("li",[t._v("docker-compose")])]),t._v(" "),s("p",[t._v("参考链接")]),t._v(" "),s("p",[t._v("这边感谢一下 bingo ，能有这篇文章的输出得感谢 bingo 通宵教学")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://bingozb.github.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("bingo blog"),s("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=a.exports}}]);